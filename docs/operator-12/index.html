<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Operator 12: Operator 12</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Operator 12
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">A puzzle game</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Operator 12 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>About</h2>
<p>Operator 12 is going to be my answer to why aren't there more puzzle/story driven games like <a href="http://biomediaproject.com/bmp/files/LEGO/gms/online/Spybotics/TheNightfallIncident/">Nightfall</a>. Hopefully will include a good story, some nice audio &amp; visuals, and some fun puzzles. Planned as a series, with a smaller inital game to test the waters and then a larger v2 game to improve upon the story and gameplay of the first.</p>
<p>This project itself is a V2. The original Operator 12 only got so far as to have mock battles (A* pathing, quad-trees, visual representations etc.) and the code was lacking in quality. Now I've graduated college and have the skills to do this properly. Again I'll keep the scope generally quite small for the first release and try not to do anything fancy.</p>
<p>The name Operator 12 stems from Prisoner (TV 1967-68)-style naming system for your side of the battle. You are #12, you report to #2. There will be more story behind the names as you get to know your organization.</p>
<h2>Features</h2>
<ul>
<li>Layout Generator<ul>
<li>Generates resizing functions from layout definitions.</li>
<li>usage <code>./main ui/style-writer &lt;name&gt;</code><ul>
<li>see name:<code>screen</code> for a simple example</li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="classUIElement.html">UIElement</a><ul>
<li>resizable elements generated from a layout style and a list of elements/data to be styled</li>
</ul>
</li>
<li><a class="el" href="classButton.html">Button</a><ul>
<li>can click them and they do <em>things</em></li>
</ul>
</li>
<li>Movement Overlay</li>
<li><a class="el" href="classText.html">Text</a><ul>
<li>Can Render text in boxes</li>
</ul>
</li>
<li><a class="el" href="classTextBox.html">TextBox</a><ul>
<li>For when <a class="el" href="classText.html">Text</a> just isn't enough</li>
</ul>
</li>
<li>Escape key closes game.</li>
<li><a class="el" href="classMap.html">Map</a><ul>
<li>Can load map and slug data from Lua file exported by <a href="https://www.mapeditor.org/">Tiled</a><ul>
<li>Sample map file found in resources/maps</li>
</ul>
</li>
<li>currently handles drawing of a loaded map</li>
<li>hopefully will eventually only handle map data and be moved to C++</li>
<li>can scroll/pan with arrow keys</li>
</ul>
</li>
<li><a class="el" href="classSegment.html">Segment</a><ul>
<li>Linked list node part of the slug</li>
</ul>
</li>
<li><a class="el" href="classSlug.html">Slug</a><ul>
<li>the basic entity of the game</li>
<li>essentially a linked list moving about the game-board</li>
<li>can move about the board if clicked one space away from 'head'</li>
<li>can damage other slugs and kill them</li>
<li>regen size as they move up to a max size</li>
<li>Enemy slugs controlled by computer <a class="el" href="classAI.html">AI</a></li>
</ul>
</li>
<li>Slug/Slugdefs<ul>
<li>holds info on what sprites are associated with which slug-type</li>
</ul>
</li>
<li>Technically cross-platform, although you'll have the easiest time with Linux. I'm developing it on linux, releases will have multiple OS (and mobile if I'm not lazy).<ul>
<li>I got windows working actually!</li>
</ul>
</li>
</ul>
<h2>Planned Content</h2>
<p>You can check the <a href="./org">org</a> folder for more information about planned content. Although as I develop the story to my liking there will be spoilers there. Opening it in emacs' orgmode should allow you to avoid looking at anything involved with the story.</p>
<h2>About Code</h2>
<ul>
<li>Started from my sdl2-lua project as a base.</li>
<li>C++ provides access to SDL2 rendering tools</li>
<li>Most of the Code base is Lua, which creates the game.<ul>
<li>Project runs quickly on my 2013 chromebook, so it'll probably run fine on mobile.</li>
</ul>
</li>
</ul>
<h2>Installation</h2>
<p>Custom Libraries you'll need</p>
<ul>
<li>SDL2-Dev <code>apt install libsdl2-dev</code></li>
<li>SDL2-Image-Dev <code>apt install libsdl2-image-dev</code></li>
<li>SDL2-TTF-Dev <code>apt install libsdl2-ttf-dev</code></li>
<li>SDL-Mixer-Dev <code>apt install libsdl-mixer1.2-dev</code></li>
<li>Lua 5.3.4<ul>
<li>Installation instructions available at <a href="https://www.lua.org/download.html">www.lua.org</a></li>
<li>Should be located in ~/lua</li>
<li>You don't need command-line lua</li>
</ul>
</li>
</ul>
<p>And Obviously you'll need <code>g++</code> to compile, and <code>make</code> to use my makefile.</p>
<h2>Building</h2>
<p>Just run <code>make</code> after installing all the software</p>
<h2>Running</h2>
<p>Just run <code>./main</code> after building is complete</p>
<p>You can also specify which lua file to run as the main. For instance <code>./main surface-tests</code> will run the surface tests lua file as the main lua file.</p>
<h2>Doxygen</h2>
<p>Run <code>python3 extract-docs.py &gt; out.hidden.c &amp;&amp; doxygen Doxyfile</code> to generate the docs. It's a horrible way to do it but it was easiest for me</p>
<h2>Contributing</h2>
<p>See ./CONTRIBUTING.md "CONTRIBUTING.md"</p>
<h2>C++ / Lua Methods</h2>
<p>You can generate method stubs with <code>python3 luahelper.py &lt; surface.txt &gt; surface.hidden.c</code> anything with <code>.hidden.</code> in it's file name is ignored by the git ignore. See surface.txt and luahelper.py for understanding of what's generated. You'll have to use auto-indentation from something like emacs or a C++ IDE to indent it, but at least you don't have to write it.</p>
<h2>Special Lua Methods Called by C++</h2>
<ul>
<li><a class="el" href="classViewer.html#a00c1736332bb855e15a1d17eb9df9105" title="view all things in a dir ">Start(argc, argv)</a></li>
<li>Update(msFraction, msTrue)<ul>
<li>Called every frame, and after every event</li>
</ul>
</li>
<li>End</li>
<li>Resize(width, height)<ul>
<li>Window has resized to (width, height).</li>
<li>Globals will not be modified by this at this time.</li>
</ul>
</li>
<li>KeyDown(which)</li>
<li>KeyUp(which)</li>
<li><a class="el" href="classUtil.html#afd21e85e9e3e81093663a67c16cc9a8c" title="mousedown fallback ">MouseDown(x, y)</a></li>
<li><a class="el" href="classUtil.html#a0e1cc2abdbf51e3794087f4a848d9806" title="mousemove fallback ">MouseMove(x, y)</a></li>
<li><a class="el" href="classUtil.html#a6abf3f3411d1e42069f6012c82165c26" title="fallback ">MouseUp(x, y)</a></li>
</ul>
<h2>Classes Exposed to Lua via C++</h2>
<h3>Music</h3>
<ul>
<li>new(source)<ul>
<li>returns 1</li>
</ul>
</li>
<li>play(music,times)<ul>
<li>returns 0</li>
</ul>
</li>
<li>setPosition(music,position)<ul>
<li>returns 0</li>
</ul>
</li>
<li>pause(music)<ul>
<li>returns 0</li>
</ul>
</li>
<li>resume(music)<ul>
<li>returns 0</li>
</ul>
</li>
<li>destroy(music)<ul>
<li>returns 0</li>
</ul>
</li>
</ul>
<h3>Sprite</h3>
<ul>
<li>new(Texture, x, y, w, h, sx, sy)<ul>
<li>returns sprite</li>
</ul>
</li>
<li>move(self, x, y)<ul>
<li>returns void</li>
</ul>
</li>
<li>size(self, w, h)<ul>
<li>returns void</li>
</ul>
</li>
<li>draw(self, x, y)<ul>
<li>returns void</li>
</ul>
</li>
<li>destroy(self)<ul>
<li>returns void</li>
</ul>
</li>
</ul>
<h3>Texture</h3>
<ul>
<li>new(source)<ul>
<li>doesn't create an object (userdata), only a pointer (lightuserdata)</li>
<li>returns texture, width, height</li>
</ul>
</li>
<li>destroy(texture)<ul>
<li>returns 0</li>
</ul>
</li>
<li>newTarget(width,height)<ul>
<li>returns 1</li>
</ul>
</li>
<li>setRGBMask(texture,r,g,b)<ul>
<li>returns 0</li>
</ul>
</li>
<li>setAMask(texture,a)<ul>
<li>returns 0</li>
</ul>
</li>
<li>renderCopy(texture,sx,sy,sw,sh,dx,dy,dw,dh)<ul>
<li>returns 0</li>
</ul>
</li>
<li>blendmode(texture,mode)<ul>
<li>returns 0</li>
</ul>
</li>
</ul>
<h3>Surface</h3>
<ul>
<li>new(source)<ul>
<li>returns 1</li>
</ul>
</li>
<li>newBlank(width,height)<ul>
<li>returns 1</li>
</ul>
</li>
<li>blendmode(surface,mode)<ul>
<li>returns 0</li>
</ul>
</li>
<li>fill(surface,x,y,width,height,r,g,b,a)<ul>
<li>returns 0</li>
</ul>
</li>
<li>size(surface)<ul>
<li>returns 2</li>
</ul>
</li>
<li>blit(dst,src,x,y)<ul>
<li>returns 0</li>
</ul>
</li>
<li>textureFrom(surface)<ul>
<li>returns 1</li>
</ul>
</li>
<li>blitScale(dst,src,sx,sy,sw,sh,dx,dy,dw,dh)<ul>
<li>returns 0</li>
</ul>
</li>
<li>destroy(surface)<ul>
<li>returns 0</li>
</ul>
</li>
</ul>
<h3>TTF</h3>
<ul>
<li>surface(text,r,g,b,a)<ul>
<li>returns 1</li>
</ul>
</li>
<li>size(text)<ul>
<li>returns 2</li>
</ul>
</li>
</ul>
<h2>Globals Method Exposed to Lua via C++</h2>
<ul>
<li>static.quit()<ul>
<li>exits the engine</li>
</ul>
</li>
<li>static.wait(time)<ul>
<li>wait <code>time</code> ms immediately</li>
</ul>
</li>
<li>static.framedelay(time)<ul>
<li>wait <code>time</code> ms after screen is displayed</li>
</ul>
</li>
<li>static.setRenderTarget(texture)<ul>
<li>returns 0</li>
</ul>
</li>
<li>static.unsetRenderTarget()<ul>
<li>returns 0</li>
</ul>
</li>
<li>static.renderClear()<ul>
<li>returns 0</li>
</ul>
</li>
<li>static.renderBlendmode(mode)<ul>
<li>returns 0</li>
</ul>
</li>
</ul>
<h2>Global Constants Exposed to Lua via C++</h2>
<ul>
<li>Keys<ul>
<li><code>KEY_UP</code>, <code>KEY_DOWN</code>, <code>KEY_LEFT</code>, <code>KEY_RIGHT</code>, <code>KEY_ESCAPE</code></li>
</ul>
</li>
<li>Screen Dimensions<ul>
<li><code>SCREEN_WIDTH</code>, <code>SCREEN_HEIGHT</code></li>
</ul>
</li>
<li>Blend Modes<ul>
<li><code>BLENDMODE_NONE</code>, <code>BLENDMODE_BLEND</code>, <code>BLENDMODE_ADD</code>, <code>BLENDMODE_MOD</code></li>
</ul>
</li>
</ul>
<h2>Tests</h2>
<ul>
<li><a class="el" href="classText.html">Text</a><ul>
<li><code>./main text/test</code></li>
<li>Use arrow keys to navigate the rendered README!</li>
</ul>
</li>
<li>Surface<ul>
<li><code>./main surface-tests</code></li>
</ul>
</li>
<li>Texture<ul>
<li><code>./main texture-tests</code></li>
</ul>
</li>
</ul>
<h2>View Controllers</h2>
<ul>
<li><a class="el" href="classBattle.html">Battle</a><ul>
<li><code>./main battle/load &lt;map-name&gt;.lua</code></li>
<li>controls battles</li>
</ul>
</li>
<li><a class="el" href="classViewer.html">Viewer</a><ul>
<li><code>./main viewer/load &lt;path&gt; &lt;sep&gt;</code></li>
<li>view shit, mostly just the copyright infos for stuff</li>
</ul>
</li>
<li><a class="el" href="classMainMenu.html">MainMenu</a><ul>
<li><code>./main</code></li>
<li>mostly just for easy access to stuff</li>
</ul>
</li>
<li><a class="el" href="classMapSelect.html">MapSelect</a><ul>
<li><code>./main level-select/load</code></li>
<li>map loading menu, based on maps in the <a href="./resources/maps">resources/maps</a> folder</li>
<li>As there isn't a cross-platform listdir operation in SDL2 or Lua, I've opted to handle this with a python script. Running <code>python3 listdir.py</code> from within the resources folder will refresh the list. If you don't like python, just edit the <code>.contents.lua</code> file in whatever directory you've added files to.</li>
</ul>
</li>
</ul>
<h2>Legal</h2>
<p><a href="./LICENSE">MIT license</a> for the project. I'm going to work in a Powered-by-Lua image eventually into the project. Also the MOZART NBP font (by Nate Halley) is used by this project. See <a href="./resources/fonts/mozart_readme.txt">its readme</a> for details.</p>
<p>Thanks/Licenses page in testing at <code>./main viewer/load</code> this simply displays all the licenses used by/planned to be used by the project when compiled &amp; linked. These are located <a href="./resources/licenses/">here</a>.</p>
<p>I have obtained permission to do the work necessary to finish this project from my company via <a href="https://opensource.google.com/docs/iarc/">iarc</a>, which is a wonderful thing. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
